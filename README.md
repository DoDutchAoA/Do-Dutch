# W4156 Go Dutch

## Second iteration

### 1. Progress overview

After the first iteration, tasks were classified into the users-related part and the receipt-related part and assigned to Qianrui and Yushi, Zhihao and Qian respectively. The progress for both parts are listed below:

- User-related part:
  1. Implemented tab navigator to navigate between home page, friend and group and signing in and signing up.
  2. Implemented searching friend function and adding friend function.
  3. Implemented creating and modifying group function.
  4. Considered valid and invalid partition and boundary condition, and created corresponding tests.

- Receipt-related part:
  1. We drastically improved the interface of the receipt page, which is now able to display the history receipts ordered by timestamps, and allows the user to edit and delete the history receipts.
  2. The functionality of adding new receipts works smoothly as before. Now a floating button is designed as the new entry of this function rather than navigating to a new page.
  3. A new overlaying modal is implemented to let users edit the detailed information of the items.
  4. Notifications and updates will be sent to all related users in real-time after critical operations related to the receipts.

### 2. Coverage report

In this iteration, we started to test our Android application, by using Jest and Enzyme. We utilized two different tools to generate the code coverage reports for our database and the Android app part: [coverage.py](https://coverage.readthedocs.io/en/latest/cmd.html) and [jest-sonar-reporter](https://www.npmjs.com/package/jest-sonar-reporter). The test script for the database can be found [here](https://github.com/DoDutchAoA/Do-Dutch/blob/jenkins/database/server/tests.py), and [here](https://github.com/DoDutchAoA/Do-Dutch/tree/jenkins/do_dutch/__test__) for our mobile programming. Two coverage reports (XML version) can be both found [here](https://github.com/DoDutchAoA/Do-Dutch/tree/jenkins/tests/test-reports/coverage). The image below shows the coverage report for our React code generated locally. 

![alt text](https://github.com/DoDutchAoA/Do-Dutch/blob/jenkins/coverage_local.png)

Just in case, the report for unit tests can be found via this [link](https://github.com/DoDutchAoA/Do-Dutch/tree/jenkins/tests/test-reports/unittest).

### 3. CI server (Jenkins)

For this iteration, we failed to deploy our test for the mobile part on our CI server due to some reasons. Firstly, our server, an EC2 instance running under the Amazon free trial, only has less than 8GB disk space and limited RAM space. Currently, without installing any dependency to run tests for our mobile app, there is only nearly 2GB left. We are afraid that installing all dependency (including OpenSSL, nodejs, npm, react-cli, jest, enzyme and so on) would leave no room for our server to process requests from the front-end. Also, to run tests successfully requires some manual configurations, which we have not figured out how to achieve them by running a script on our CI server.

Even though we did not have our CI server configured, we still got the coverage report successfully shown on our CI server. The reason for that reports which can be read by the CI server is not necessarily generated by tests running on the CI server. So it reads reports we generated locally and pushed to the git repository. The report is shown below. 

![alt text](https://github.com/DoDutchAoA/Do-Dutch/blob/jenkins/coverage.png)

The reasons why the coverage rate is not so high is there are still some functions we have not figured out how to test by test scripts, such as functions involved in POST and GET requests, and functions declared inside namespace instead of class. We are trying hard to figure out them and hopefully, we can test as much as possible functions by the end of the final demo.


### 4. Miscellaneous

Static analysis reports 
  - For Python code: https://github.com/DoDutchAoA/Do-Dutch/tree/jenkins/first_iteration
  - For React code: https://github.com/DoDutchAoA/Do-Dutch/tree/jenkins/static_analysis

### 5. Future work

By the demo day for the second iteration, the receipt team is expected to complete the development of all user stories related to the receipt. If time allows, the progress of corresponding tests should be caught up. In the demo for the second iteration, functions mentioned in all user stories should work both individually and integrally. After that, the main tasks for us would be the user testing, maintenance, and UI polishing, if time allows.
